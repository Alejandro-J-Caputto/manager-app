(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(t,e,r){"use strict";r.r(e),r.d(e,"AuthModule",function(){return L});var i=r("ofXK"),o=r("3Pt+"),n=r("tyNb"),a=r("tk/3"),s=r("fXoL"),c=r("N/25"),b=r("LZTH"),u=r("wBfi"),l=r("XpIn");const d=["loginButton"];function m(t,e){1&t&&(s.Nb(0,"p",20),s.nc(1,"The email adress is required"),s.Mb())}function p(t,e){1&t&&(s.Nb(0,"p",20),s.nc(1,"The password is required"),s.Mb())}function g(t,e){if(1&t&&(s.Nb(0,"p",20),s.nc(1),s.Mb()),2&t){const t=s.Wb();s.zb(1),s.oc(t.errorApi)}}const h=function(){return["/auth/register"]};let f=(()=>{class t{constructor(t,e,r,i,o){this.auth=t,this.router=e,this.notifyService=r,this.notification=i,this.managerApp=o,this.errorApi="",this.login={email:"",password:""}}ngOnInit(){}loginFormTemplate(t){if(this.errorApi="",t.invalid)return t.control.markAllAsTouched(),void Object.values(t.controls).map(t=>t.markAllAsTouched());t.valid&&this.auth.authLogin(this.login).subscribe(t=>{this.logButton.nativeElement.disabled=!0,this.notifyService.getMessage("loading"),this.notification.toggleNotification(),setTimeout(()=>{"success"===t.status&&(this.notification.toggleNotification(),this.managerApp.token=`Bearer ${t.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${t.token}`),this.auth._user=t.user,this.notifyService.getMessage("login"),this.notification.toggleNotification(),setTimeout(()=>{this.router.navigate(["/v2/manager-app/home/workspaces"])},1500))},2e3)},t=>{console.log(t),this.errorApi=t.error.message,this.logButton.nativeElement.disabled=!1,this.notification.toggleNotification()})}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(c.a),s.Kb(n.b),s.Kb(b.a),s.Kb(u.a),s.Kb(l.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-login"]],viewQuery:function(t,e){if(1&t&&s.qc(d,1),2&t){let t;s.fc(t=s.Vb())&&(e.logButton=t.first)}},decls:31,vars:7,consts:[[1,"section__auth"],[1,"auth-card"],["action","#","autocomplete","off",1,"auth-card__form",3,"ngSubmit"],["loginForm","ngForm"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["name","email","type","text","type","email","required","","minlength","5","placeholder","Email Address","id","email",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["name","password","type","password","placeholder","Password","id","password","required","","minlength","5","type","password",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["pass","ngModel"],["for","password",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],["loginButton",""],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box","log"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(t,e){if(1&t){const t=s.Ob();s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2,3),s.Ub("ngSubmit",function(){s.hc(t);const r=s.gc(4);return e.loginFormTemplate(r)}),s.Nb(5,"h2",4),s.nc(6," Manager-App "),s.Mb(),s.Nb(7,"div",5),s.Nb(8,"input",6,7),s.Ub("ngModelChange",function(t){return e.login.email=t}),s.Mb(),s.Nb(10,"label",8),s.nc(11,"Email Address"),s.Mb(),s.mc(12,m,2,0,"p",9),s.Mb(),s.Nb(13,"div",5),s.Nb(14,"input",10,11),s.Ub("ngModelChange",function(t){return e.login.password=t}),s.Mb(),s.Nb(16,"label",12),s.nc(17,"Password"),s.Mb(),s.mc(18,p,2,0,"p",9),s.mc(19,g,2,1,"p",9),s.Mb(),s.Nb(20,"div",5),s.Nb(21,"button",13,14),s.nc(23," Log in "),s.Mb(),s.Mb(),s.Nb(24,"div",15),s.Nb(25,"p",16),s.nc(26,"Don't you have an account? "),s.Nb(27,"span",17),s.nc(28," Register now "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(29,"div",18),s.Lb(30,"img",19),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.gc(9),r=s.gc(15);s.zb(8),s.bc("ngModel",e.login.email),s.zb(4),s.bc("ngIf",t.invalid&&t.touched),s.zb(2),s.bc("ngModel",e.login.password),s.zb(4),s.bc("ngIf",r.invalid&&r.touched),s.zb(1),s.bc("ngIf",e.errorApi),s.zb(8),s.bc("routerLink",s.dc(6,h))}},directives:[u.a,o.o,o.i,o.j,o.a,o.m,o.g,o.h,o.k,i.i,n.c],styles:[""]}),t})();const _=["registerButton"];function M(t,e){1&t&&(s.Nb(0,"p",21),s.nc(1,"The name is required"),s.Mb())}function N(t,e){1&t&&(s.Nb(0,"p",21),s.nc(1,"The email adress is required"),s.Mb())}function v(t,e){1&t&&(s.Nb(0,"p",21),s.nc(1,"The password is required"),s.Mb())}function w(t,e){1&t&&(s.Nb(0,"p",21),s.nc(1,"The password confirmation is required"),s.Mb())}function y(t,e){if(1&t&&(s.Nb(0,"p",21),s.nc(1),s.Mb()),2&t){const t=s.Wb();s.zb(1),s.oc(t.errorApi)}}const A=function(){return["/auth/login"]},I=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Eb({type:t,selectors:[["app-main-auth"]],decls:1,vars:0,template:function(t,e){1&t&&s.Lb(0,"router-outlet")},directives:[n.g],styles:[""]}),t})(),children:[{path:"login",component:f},{path:"register",component:(()=>{class t{constructor(t,e,r,i,n,a){this.fb=t,this.notifyService=e,this.auth=r,this.router=i,this.notification=n,this.managerApp=a,this.errorApi="",this.registerForm=this.fb.group({name:["",[o.n.required,o.n.minLength(3)]],email:["",[o.n.required,o.n.email]],password:["",[o.n.required]],passwordConfirm:["",o.n.required]})}ngOnInit(){}reactiveForm(){this.registerForm=this.fb.group({name:[""],email:[""],password:[""],passwordConfirm:[""]})}isInvalid(t){return this.registerForm.controls[t].errors&&this.registerForm.controls[t].touched}sendForm(){this.errorApi="",this.registerForm.invalid?this.registerForm.markAllAsTouched():(this.auth.authRegister(this.registerForm.value).subscribe(t=>{this.regButton.nativeElement.disabled=!0,this.notifyService.getMessage("loading"),this.notification.toggleNotification(),setTimeout(()=>{"success"===t.status&&(this.notification.toggleNotification(),this.managerApp.token=`Bearer ${t.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${t.token}`),this.auth._user=t.newUser,this.notifyService.getMessage("registration"),this.notification.toggleNotification(),setTimeout(()=>{this.router.navigateByUrl("/v2/manager-app/home/workspaces")},1500))},2e3)},t=>{console.log(t),this.errorApi=t.error.message,this.regButton.nativeElement.disabled=!1,this.notification.toggleNotification()}),this.registerForm.reset())}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(o.b),s.Kb(b.a),s.Kb(c.a),s.Kb(n.b),s.Kb(u.a),s.Kb(l.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-register"]],viewQuery:function(t,e){if(1&t&&s.qc(_,1),2&t){let t;s.fc(t=s.Vb())&&(e.regButton=t.first)}},decls:38,vars:8,consts:[[1,"section__auth"],[1,"auth-card"],["autocomplete","off",1,"auth-card__form","auth-card--register",3,"formGroup","ngSubmit"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["type","text","placeholder","Name","formControlName","name","name","name","id","name",1,"auth-card__form__input"],["for","name",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["type","email","formControlName","email","name","email","placeholder","Email Address","id","email",1,"auth-card__form__input"],["for","email",1,"auth-card__form__label"],["type","password","placeholder","Password","formControlName","password","name","password","id","password",1,"auth-card__form__input"],["for","password",1,"auth-card__form__label"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","name","passwordConfirm","id","passwordConfirm",1,"auth-card__form__input"],["for","passwordConfirm",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],["registerButton",""],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(t,e){1&t&&(s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2),s.Ub("ngSubmit",function(){return e.sendForm()}),s.Nb(4,"h2",3),s.nc(5," Manager-App "),s.Mb(),s.Nb(6,"div",4),s.Lb(7,"input",5),s.Nb(8,"label",6),s.nc(9,"Name"),s.Mb(),s.mc(10,M,2,0,"p",7),s.Mb(),s.Nb(11,"div",4),s.Lb(12,"input",8),s.Nb(13,"label",9),s.nc(14,"Email Address"),s.Mb(),s.mc(15,N,2,0,"p",7),s.Mb(),s.Nb(16,"div",4),s.Lb(17,"input",10),s.Nb(18,"label",11),s.nc(19,"Password"),s.Mb(),s.mc(20,v,2,0,"p",7),s.Mb(),s.Nb(21,"div",4),s.Lb(22,"input",12),s.Nb(23,"label",13),s.nc(24,"Confirm Password"),s.Mb(),s.mc(25,w,2,0,"p",7),s.mc(26,y,2,1,"p",7),s.Mb(),s.Nb(27,"div",4),s.Nb(28,"button",14,15),s.nc(30," Sign In "),s.Mb(),s.Mb(),s.Nb(31,"div",16),s.Nb(32,"p",17),s.nc(33,"Already registered? "),s.Nb(34,"span",18),s.nc(35," Log in "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(36,"div",19),s.Lb(37,"img",20),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.zb(3),s.bc("formGroup",e.registerForm),s.zb(7),s.bc("ngIf",e.isInvalid("name")),s.zb(5),s.bc("ngIf",e.isInvalid("email")),s.zb(5),s.bc("ngIf",e.isInvalid("password")),s.zb(5),s.bc("ngIf",e.isInvalid("passwordConfirm")),s.zb(1),s.bc("ngIf",e.errorApi),s.zb(8),s.bc("routerLink",s.dc(7,A)))},directives:[u.a,o.o,o.i,o.e,o.a,o.h,o.d,i.i,n.c],styles:[""]}),t})()},{path:"**",redirectTo:"login"}]}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({imports:[[n.f.forChild(I)],n.f]}),t})();var C=r("PCNd");let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({imports:[[i.b,k,o.f,o.l,C.a]]}),t})()}}]);