(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(r,e,t){"use strict";t.r(e),t.d(e,"AuthModule",function(){return k});var o=t("ofXK"),n=t("3Pt+"),i=t("tyNb"),a=t("tk/3"),s=t("fXoL"),c=t("N/25"),b=t("LZTH"),u=t("wBfi"),l=t("XpIn");function m(r,e){1&r&&(s.Nb(0,"p",19),s.nc(1,"The email adress is required"),s.Mb())}function p(r,e){1&r&&(s.Nb(0,"p",19),s.nc(1,"The password is required"),s.Mb())}function d(r,e){if(1&r&&(s.Nb(0,"p",19),s.nc(1),s.Mb()),2&r){const r=s.Wb();s.zb(1),s.oc(r.errorApi)}}const h=function(){return["/auth/register"]};let g=(()=>{class r{constructor(r,e,t,o,n){this.auth=r,this.router=e,this.notifyService=t,this.notification=o,this.managerApp=n,this.errorApi="",this.login={email:"",password:""}}ngOnInit(){}loginFormTemplate(r){if(this.errorApi="",r.invalid)return r.control.markAllAsTouched(),void Object.values(r.controls).map(r=>r.markAllAsTouched());r.valid&&(console.log(this.login.password),this.auth.authLogin(this.login).subscribe(r=>{"success"===r.status&&(this.managerApp.token=`Bearer ${r.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${r.token}`),this.auth._user=r.user,this.notifyService.getMessage("login"),this.notification.toggleNotification(),setTimeout(()=>{this.router.navigate(["/v2/manager-app/home/workspaces"])},3e3))},r=>{console.log(r),this.errorApi=r.error.message}))}}return r.\u0275fac=function(e){return new(e||r)(s.Kb(c.a),s.Kb(i.b),s.Kb(b.a),s.Kb(u.a),s.Kb(l.a))},r.\u0275cmp=s.Eb({type:r,selectors:[["app-login"]],decls:30,vars:7,consts:[[1,"section__auth"],[1,"auth-card"],["action","#","autocomplete","off",1,"auth-card__form",3,"ngSubmit"],["loginForm","ngForm"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["name","email","type","text","type","email","required","","minlength","5","placeholder","Email Address","id","email",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["name","password","type","password","placeholder","Password","id","password","required","","minlength","5","type","password",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["pass","ngModel"],["for","password",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box","log"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(r,e){if(1&r){const r=s.Ob();s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2,3),s.Ub("ngSubmit",function(){s.hc(r);const t=s.gc(4);return e.loginFormTemplate(t)}),s.Nb(5,"h2",4),s.nc(6," Manager-App "),s.Mb(),s.Nb(7,"div",5),s.Nb(8,"input",6,7),s.Ub("ngModelChange",function(r){return e.login.email=r}),s.Mb(),s.Nb(10,"label",8),s.nc(11,"Email Address"),s.Mb(),s.mc(12,m,2,0,"p",9),s.Mb(),s.Nb(13,"div",5),s.Nb(14,"input",10,11),s.Ub("ngModelChange",function(r){return e.login.password=r}),s.Mb(),s.Nb(16,"label",12),s.nc(17,"Password"),s.Mb(),s.mc(18,p,2,0,"p",9),s.mc(19,d,2,1,"p",9),s.Mb(),s.Nb(20,"div",5),s.Nb(21,"button",13),s.nc(22," Log in "),s.Mb(),s.Mb(),s.Nb(23,"div",14),s.Nb(24,"p",15),s.nc(25,"Don't you have an account? "),s.Nb(26,"span",16),s.nc(27," Register now "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(28,"div",17),s.Lb(29,"img",18),s.Mb(),s.Mb(),s.Mb()}if(2&r){const r=s.gc(9),t=s.gc(15);s.zb(8),s.bc("ngModel",e.login.email),s.zb(4),s.bc("ngIf",r.invalid&&r.touched),s.zb(2),s.bc("ngModel",e.login.password),s.zb(4),s.bc("ngIf",t.invalid&&t.touched),s.zb(1),s.bc("ngIf",e.errorApi),s.zb(7),s.bc("routerLink",s.dc(6,h))}},directives:[u.a,n.n,n.h,n.i,n.a,n.l,n.f,n.g,n.j,o.i,i.c],styles:[""]}),r})();function f(r,e){1&r&&(s.Nb(0,"p",20),s.nc(1,"The name is required"),s.Mb())}function _(r,e){1&r&&(s.Nb(0,"p",20),s.nc(1,"The email adress is required"),s.Mb())}function M(r,e){1&r&&(s.Nb(0,"p",20),s.nc(1,"The password is required"),s.Mb())}function w(r,e){1&r&&(s.Nb(0,"p",20),s.nc(1,"The password confirmation is required"),s.Mb())}function N(r,e){if(1&r&&(s.Nb(0,"p",20),s.nc(1),s.Mb()),2&r){const r=s.Wb();s.zb(1),s.oc(r.errorApi)}}const v=function(){return["/auth/login"]},A=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=s.Eb({type:r,selectors:[["app-main-auth"]],decls:1,vars:0,template:function(r,e){1&r&&s.Lb(0,"router-outlet")},directives:[i.g],styles:[""]}),r})(),children:[{path:"login",component:g},{path:"register",component:(()=>{class r{constructor(r,e,t,o,i,a){this.fb=r,this.notifyService=e,this.auth=t,this.router=o,this.notification=i,this.managerApp=a,this.errorApi="",this.registerForm=this.fb.group({name:["",[n.m.required,n.m.minLength(3)]],email:["",[n.m.required,n.m.email]],password:["",[n.m.required]],passwordConfirm:["",n.m.required]})}ngOnInit(){}reactiveForm(){this.registerForm=this.fb.group({name:[""],email:[""],password:[""],passwordConfirm:[""]})}isInvalid(r){return this.registerForm.controls[r].errors&&this.registerForm.controls[r].touched}sendForm(){this.errorApi="",this.registerForm.invalid?this.registerForm.markAllAsTouched():(console.log(this.registerForm.value),this.auth.authRegister(this.registerForm.value).subscribe(r=>{"success"===r.status&&(this.managerApp.token=`Bearer ${r.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${r.token}`),console.log(r.newUser),console.log(r.token),this.auth._user=r.newUser,this.notifyService.getMessage("registration"),this.notification.toggleNotification(),setTimeout(()=>{this.router.navigateByUrl("/v2/manager-app/home/workspaces")},2e3))},r=>{console.log(r),this.errorApi=r.error.message}),this.registerForm.reset())}}return r.\u0275fac=function(e){return new(e||r)(s.Kb(n.b),s.Kb(b.a),s.Kb(c.a),s.Kb(i.b),s.Kb(u.a),s.Kb(l.a))},r.\u0275cmp=s.Eb({type:r,selectors:[["app-register"]],decls:37,vars:8,consts:[[1,"section__auth"],[1,"auth-card"],["autocomplete","off",1,"auth-card__form","auth-card--register",3,"formGroup","ngSubmit"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["type","text","placeholder","Name","formControlName","name","name","name","id","name",1,"auth-card__form__input"],["for","name",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["type","email","formControlName","email","name","email","placeholder","Email Address","id","email",1,"auth-card__form__input"],["for","email",1,"auth-card__form__label"],["type","password","placeholder","Password","formControlName","password","name","password","id","password",1,"auth-card__form__input"],["for","password",1,"auth-card__form__label"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","name","passwordConfirm","id","passwordConfirm",1,"auth-card__form__input"],["for","passwordConfirm",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(r,e){1&r&&(s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2),s.Ub("ngSubmit",function(){return e.sendForm()}),s.Nb(4,"h2",3),s.nc(5," Manager-App "),s.Mb(),s.Nb(6,"div",4),s.Lb(7,"input",5),s.Nb(8,"label",6),s.nc(9,"Name"),s.Mb(),s.mc(10,f,2,0,"p",7),s.Mb(),s.Nb(11,"div",4),s.Lb(12,"input",8),s.Nb(13,"label",9),s.nc(14,"Email Address"),s.Mb(),s.mc(15,_,2,0,"p",7),s.Mb(),s.Nb(16,"div",4),s.Lb(17,"input",10),s.Nb(18,"label",11),s.nc(19,"Password"),s.Mb(),s.mc(20,M,2,0,"p",7),s.Mb(),s.Nb(21,"div",4),s.Lb(22,"input",12),s.Nb(23,"label",13),s.nc(24,"Confirm Password"),s.Mb(),s.mc(25,w,2,0,"p",7),s.mc(26,N,2,1,"p",7),s.Mb(),s.Nb(27,"div",4),s.Nb(28,"button",14),s.nc(29," Sign In "),s.Mb(),s.Mb(),s.Nb(30,"div",15),s.Nb(31,"p",16),s.nc(32,"Already registered? "),s.Nb(33,"span",17),s.nc(34," Log in "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(35,"div",18),s.Lb(36,"img",19),s.Mb(),s.Mb(),s.Mb()),2&r&&(s.zb(3),s.bc("formGroup",e.registerForm),s.zb(7),s.bc("ngIf",e.isInvalid("name")),s.zb(5),s.bc("ngIf",e.isInvalid("email")),s.zb(5),s.bc("ngIf",e.isInvalid("password")),s.zb(5),s.bc("ngIf",e.isInvalid("passwordConfirm")),s.zb(1),s.bc("ngIf",e.errorApi),s.zb(7),s.bc("routerLink",s.dc(7,v)))},directives:[u.a,n.n,n.h,n.d,n.a,n.g,n.c,o.i,i.c],styles:[""]}),r})()},{path:"**",redirectTo:"login"}]}];let y=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.Ib({type:r}),r.\u0275inj=s.Hb({imports:[[i.f.forChild(A)],i.f]}),r})();var I=t("PCNd");let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.Ib({type:r}),r.\u0275inj=s.Hb({imports:[[o.b,y,n.e,n.k,I.a]]}),r})()}}]);