(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return k});var o=r("ofXK"),i=r("3Pt+"),n=r("tyNb"),a=r("tk/3"),s=r("fXoL"),c=r("N/25"),u=r("LZTH"),l=r("wBfi"),d=r("XpIn");const b=["loginButton"];function m(e,t){1&e&&(s.Nb(0,"p",20),s.oc(1,"The email adress is required"),s.Mb())}function p(e,t){1&e&&(s.Nb(0,"p",20),s.oc(1,"The password is required"),s.Mb())}const h=function(){return["/auth/register"]};let g=(()=>{class e{constructor(e,t,r,o,i){this.auth=e,this.router=t,this.notifyService=r,this.notification=o,this.managerApp=i,this.errorApi="",this.login={email:"",password:""}}ngOnInit(){}loginFormTemplate(e){if(this.errorApi="",e.invalid)return e.control.markAllAsTouched(),void Object.values(e.controls).map(e=>e.markAllAsTouched());e.valid&&(this.notifyService.getMessage("loading"),this.notification.toggleNotification(),e.control.disable(),this.auth.authLogin(this.login).subscribe(e=>{this.logButton.nativeElement.disabled=!0,setTimeout(()=>{"success"===e.status&&(this.notifyService.getMessage("login"),this.managerApp.token=`Bearer ${e.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${e.token}`),this.auth._user=e.user,setTimeout(()=>{this.router.navigate(["/v2/manager-app/home/workspaces"])},1500))},2e3)},t=>{this.errorApi=t.error.message,this.logButton.nativeElement.disabled=!1,console.log(this.errorApi),this.notifyService.getMessage("wuops",this.errorApi),setTimeout(()=>{this.notification.toggleNotification()},2500),this.logButton.nativeElement.disabled=!1,e.control.enable()}))}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(c.a),s.Kb(n.b),s.Kb(u.a),s.Kb(l.a),s.Kb(d.a))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&s.rc(b,1),2&e){let e;s.gc(e=s.Vb())&&(t.logButton=e.first)}},decls:30,vars:6,consts:[[1,"section__auth"],[1,"auth-card"],["action","#","autocomplete","off",1,"auth-card__form",3,"ngSubmit"],["loginForm","ngForm"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["name","email","type","text","type","email","required","","minlength","5","placeholder","Email Address","id","email",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["email","ngModel"],["for","email",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["name","password","type","password","placeholder","Password","id","password","required","","minlength","5","type","password",1,"auth-card__form__input",3,"ngModel","ngModelChange"],["pass","ngModel"],["for","password",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],["loginButton",""],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box","log"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(e,t){if(1&e){const e=s.Ob();s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2,3),s.Ub("ngSubmit",function(){s.ic(e);const r=s.hc(4);return t.loginFormTemplate(r)}),s.Nb(5,"h2",4),s.oc(6," Manager-App "),s.Mb(),s.Nb(7,"div",5),s.Nb(8,"input",6,7),s.Ub("ngModelChange",function(e){return t.login.email=e}),s.Mb(),s.Nb(10,"label",8),s.oc(11,"Email Address"),s.Mb(),s.nc(12,m,2,0,"p",9),s.Mb(),s.Nb(13,"div",5),s.Nb(14,"input",10,11),s.Ub("ngModelChange",function(e){return t.login.password=e}),s.Mb(),s.Nb(16,"label",12),s.oc(17,"Password"),s.Mb(),s.nc(18,p,2,0,"p",9),s.Mb(),s.Nb(19,"div",5),s.Nb(20,"button",13,14),s.oc(22," Log in "),s.Mb(),s.Mb(),s.Nb(23,"div",15),s.Nb(24,"p",16),s.oc(25,"Don't you have an account? "),s.Nb(26,"span",17),s.oc(27," Register now "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(28,"div",18),s.Lb(29,"img",19),s.Mb(),s.Mb(),s.Mb()}if(2&e){const e=s.hc(9),r=s.hc(15);s.zb(8),s.cc("ngModel",t.login.email),s.zb(4),s.cc("ngIf",e.invalid&&e.touched),s.zb(2),s.cc("ngModel",t.login.password),s.zb(4),s.cc("ngIf",r.invalid&&r.touched),s.zb(8),s.cc("routerLink",s.ec(5,h))}},directives:[l.a,i.o,i.i,i.j,i.a,i.m,i.g,i.h,i.k,o.i,n.c],styles:[""]}),e})();const f=["registerButton"];function _(e,t){1&e&&(s.Nb(0,"p",21),s.oc(1,"The name is required"),s.Mb())}function v(e,t){1&e&&(s.Nb(0,"p",21),s.oc(1,"The email adress is required"),s.Mb())}function M(e,t){1&e&&(s.Nb(0,"p",21),s.oc(1,"The password is required"),s.Mb())}function w(e,t){1&e&&(s.Nb(0,"p",21),s.oc(1,"The password confirmation is required"),s.Mb())}const N=function(){return["/auth/login"]},y=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Eb({type:e,selectors:[["app-main-auth"]],decls:1,vars:0,template:function(e,t){1&e&&s.Lb(0,"router-outlet")},directives:[n.g],styles:[""]}),e})(),children:[{path:"login",component:g},{path:"register",component:(()=>{class e{constructor(e,t,r,o,n,a){this.fb=e,this.notifyService=t,this.auth=r,this.router=o,this.notification=n,this.managerApp=a,this.errorApi="",this.registerForm=this.fb.group({name:["",[i.n.required,i.n.minLength(3)]],email:["",[i.n.required,i.n.email]],password:["",[i.n.required]],passwordConfirm:["",i.n.required]})}ngOnInit(){}reactiveForm(){this.registerForm=this.fb.group({name:[""],email:[""],password:[""],passwordConfirm:[""]})}isInvalid(e){return this.registerForm.controls[e].errors&&this.registerForm.controls[e].touched}sendForm(){this.errorApi="",this.registerForm.invalid?this.registerForm.markAllAsTouched():(this.notifyService.getMessage("loading"),this.notification.toggleNotification(),this.registerForm.disable(),this.regButton.nativeElement.disabled=!0,this.auth.authRegister(this.registerForm.value).subscribe(e=>{setTimeout(()=>{"success"===e.status&&(this.notifyService.getMessage("registration"),this.managerApp.token=`Bearer ${e.token}`,this.managerApp.headers=(new a.c).set("Authorization",this.managerApp.token),localStorage.setItem("bearer-todo",`Bearer ${e.token}`),this.auth._user=e.newUser,setTimeout(()=>{this.router.navigateByUrl("/v2/manager-app/home/workspaces")},1500))},2e3)},e=>{this.errorApi=e.error.message,this.regButton.nativeElement.disabled=!1,this.notifyService.getMessage("wuops",this.errorApi),setTimeout(()=>{this.notification.toggleNotification()},2500),this.regButton.nativeElement.disabled=!1,this.registerForm.enable()}),this.registerForm.reset())}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(i.b),s.Kb(u.a),s.Kb(c.a),s.Kb(n.b),s.Kb(l.a),s.Kb(d.a))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-register"]],viewQuery:function(e,t){if(1&e&&s.rc(f,1),2&e){let e;s.gc(e=s.Vb())&&(t.regButton=e.first)}},decls:37,vars:7,consts:[[1,"section__auth"],[1,"auth-card"],["autocomplete","off",1,"auth-card__form","auth-card--register",3,"formGroup","ngSubmit"],[1,"heading-secondary","u-margin-bottom-small","u-margin-top"],[1,"auth-card__form__group"],["type","text","placeholder","Name","formControlName","name","name","name","id","name",1,"auth-card__form__input"],["for","name",1,"auth-card__form__label"],["class","auth__error",4,"ngIf"],["type","email","formControlName","email","name","email","placeholder","Email Address","id","email",1,"auth-card__form__input"],["for","email",1,"auth-card__form__label"],["type","password","placeholder","Password","formControlName","password","name","password","id","password",1,"auth-card__form__input"],["for","password",1,"auth-card__form__label"],["type","password","placeholder","Confirm Password","formControlName","passwordConfirm","name","passwordConfirm","id","passwordConfirm",1,"auth-card__form__input"],["for","passwordConfirm",1,"auth-card__form__label"],["type","submit",1,"btn","btn--red"],["registerButton",""],[1,"auth-card__form__group","u-margin-bottom-small"],[1,"paragraph","u-center-text"],[2,"font-weight","500","text-decoration","underline","cursor","pointer",3,"routerLink"],[1,"auth-card__icon-box"],["src","assets/img/file_type_angular_icon_130754.png","alt","angular icon",1,"auth-card__icon"],[1,"auth__error"]],template:function(e,t){1&e&&(s.Lb(0,"app-notifications"),s.Nb(1,"div",0),s.Nb(2,"div",1),s.Nb(3,"form",2),s.Ub("ngSubmit",function(){return t.sendForm()}),s.Nb(4,"h2",3),s.oc(5," Manager-App "),s.Mb(),s.Nb(6,"div",4),s.Lb(7,"input",5),s.Nb(8,"label",6),s.oc(9,"Name"),s.Mb(),s.nc(10,_,2,0,"p",7),s.Mb(),s.Nb(11,"div",4),s.Lb(12,"input",8),s.Nb(13,"label",9),s.oc(14,"Email Address"),s.Mb(),s.nc(15,v,2,0,"p",7),s.Mb(),s.Nb(16,"div",4),s.Lb(17,"input",10),s.Nb(18,"label",11),s.oc(19,"Password"),s.Mb(),s.nc(20,M,2,0,"p",7),s.Mb(),s.Nb(21,"div",4),s.Lb(22,"input",12),s.Nb(23,"label",13),s.oc(24,"Confirm Password"),s.Mb(),s.nc(25,w,2,0,"p",7),s.Mb(),s.Nb(26,"div",4),s.Nb(27,"button",14,15),s.oc(29," Sign In "),s.Mb(),s.Mb(),s.Nb(30,"div",16),s.Nb(31,"p",17),s.oc(32,"Already registered? "),s.Nb(33,"span",18),s.oc(34," Log in "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(35,"div",19),s.Lb(36,"img",20),s.Mb(),s.Mb(),s.Mb()),2&e&&(s.zb(3),s.cc("formGroup",t.registerForm),s.zb(7),s.cc("ngIf",t.isInvalid("name")),s.zb(5),s.cc("ngIf",t.isInvalid("email")),s.zb(5),s.cc("ngIf",t.isInvalid("password")),s.zb(5),s.cc("ngIf",t.isInvalid("passwordConfirm")),s.zb(8),s.cc("routerLink",s.ec(6,N)))},directives:[l.a,i.o,i.i,i.e,i.a,i.h,i.d,o.i,n.c],styles:[""]}),e})()},{path:"**",redirectTo:"login"}]}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[n.f.forChild(y)],n.f]}),e})();var I=r("PCNd");let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({imports:[[o.b,A,i.f,i.l,I.a]]}),e})()}}]);